---
title: Playwright
slug: /playwright
---

# Use Argos with Playwright

Integrating Argos with your [Playwright](https://playwright.dev/) tests to enable visual testing on your application.

Playwright already offers a command to take screenshots. The official Argos Playwright integration uses it but also does several things:

- Wait for all images to be loaded
- Wait for all fonts to be loaded
- Wait for no `aria-busy` (loader) elements to be present in the page
- Hide scrollbars
- Hide carets
- Expose CSS helpers to help you hiding content

## 1. Setup

### Install packages

```
npm install --save-dev @argos-ci/playwright @playwright/test
```

### Setup Argos reporter

Argos reporter automatically uploads screenshots to Argos while your tests are running.

```ts
// playwright.config.{js,ts}
import { defineConfig } from "@playwright/test";

export default defineConfig({
  // ...
  reporter: [["list"], ["@argos-ci/playwright/reporter"]],
});
```

## 2. Use in your tests

`argosScreenshot` command stabilizes the UI and takes a screenshot.

_How to take a screenshot with `argosScreenshot` command_

```js
import { test } from "@playwright/test";
import { argosScreenshot } from "@argos-ci/playwright";

test.describe("Homepage", () => {
  test("take screenshot", async ({ page }) => {
    await page.goto(TEST_URL);
    await argosScreenshot(page, "homepage");
  });
});
```

## 3. Setup your CI

Run your Playwright tests as usual and screenshots will be automatically uploaded.

> If you use another CI than GitHub Actions, be sure to expose `ARGOS_TOKEN` as environment variable.

## API

### argosScreenshot(page, name[, options])

- `page` - A `playwright` page instance
- `name` - The screenshot name; must be unique
- `options` - See [Page.screenshot command options](https://playwright.dev/docs/api/class-page#page-screenshot)
- `options.element` - Accept an ElementHandle or a string selector to screenshot an element
- `options.viewports` - Specifies the viewports for which to capture screenshots. See [viewports configuration](https://argos-ci.com/docs/viewports).

#### Helper attributes

The `data-visual-test` attributes allow you to control how elements behave in the Argos screenshot.

It is often used to hide changing element like dates.

- `[data-visual-test="transparent"]` - Make the element transparent (`opacity: 0`)
- `[data-visual-test="removed"]` - Remove the element (`display: none`)
- `[data-visual-test="blackout"]` - Blacked out the element
- `[data-visual-test-no-radius]` - Removes border radius

_How to use an helper to hide a div from a screenshot_

```html
<div id="clock" data-visual-test="transparent">...</div>
```

## Resources

- [@argos-ci/playwright on GitHub](https://github.com/argos-ci/argos-playwright)
- [@argos-ci/playwright on npm](https://www.npmjs.com/package/@argos-ci/playwright)
